(this["webpackJsonppopulation-chart"]=this["webpackJsonppopulation-chart"]||[]).push([[0],{121:function(e,t,r){e.exports={gridContainer:"styles_gridContainer__11aFi"}},161:function(e,t,r){e.exports={fallback:"styles_fallback__3ISJS"}},181:function(e,t,r){e.exports={root:"styles_root__X0wV2"}},193:function(e,t,r){},330:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(40),c=r.n(a),o=r(20),s=(r(193),r(97)),i=r.n(s),u=r(161),p=r.n(u),f=r(13),d=function(){return Object(f.jsx)("div",{className:p.a.fallback,children:"loading..."})},l=r(338),j=r(332),b=r(336),h=r(179),x=r(180),O=r(81),v=r(78),m=r(183),y=r(54),w=Object(o.b)({key:"selected prefCodes atom",default:[]});var k=r(16),g=r.n(k),C=r(29),_=r(23),S=r(37),N=r(38),I=r(65),A=function(e){Object(S.a)(r,e);var t=Object(N.a)(r);function r(e,n){var a;return Object(_.a)(this,r),(a=t.call(this,"".concat(e," : ").concat(n))).statusCode=e,a.description=n,a}return r}(Object(I.a)(Error)),E=Object(o.b)({key:"resasApiService atom",default:new function e(t){var r=this;Object(_.a)(this,e),this.apiKey=t,this.endpoint="https://opendata.resas-portal.go.jp",this.get=function(){var e=Object(C.a)(g.a.mark((function e(t,n){var a,c,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n?"".concat(r.endpoint,"/").concat(t,"?").concat(n):"".concat(r.endpoint,"/").concat(t),e.next=3,fetch(a,{headers:{"X-API-KEY":r.apiKey}});case 3:if(!((c=e.sent).status>=500&&c.status<600)){e.next=6;break}throw new A(c.status,"RESAS Server Error");case 6:return e.next=8,c.json();case 8:if(o=e.sent,429!==c.status&&"429"!==o&&"429"!==o.statusCode){e.next=11;break}throw new A(429,"Too Many Requests");case 11:if("400"!==o){e.next=13;break}throw new A(400,"Bad Request");case 13:if("403"!==o.statusCode){e.next=15;break}throw new A(403,"Forbidden");case 15:if("404"!==o&&"404"!==o.statusCode){e.next=17;break}throw new A(404,"Not Found");case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this.prefectures=Object(C.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get("api/v1/prefectures");case 2:return t=e.sent,e.abrupt("return",t.result);case 4:case"end":return e.stop()}}),e)}))),this.populationCompositionPerYear=function(){var e=Object(C.a)(g.a.mark((function e(t){var n,a,c,o,s=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"-",a=s.length>2?s[2]:void 0,(c=new URLSearchParams).append("prefCode",String(t)),c.append("cityCode",n),a&&c.append("addArea",a.map((function(e){return e.cityCode?"".concat(e.prefCode,"_").concat(e.cityCode):"".concat(e.prefCode,"_")})).join(",")),e.next=8,r.get("api/v1/population/composition/perYear",c);case 8:return o=e.sent,e.abrupt("return",o.result);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}("25BO76EGI4g8ugQJGIAqzWk93rVrWVxZuxW02TJp")}),J=Object(o.d)({key:"population selector family",get:function(e){var t=e.prefCode;return function(){var e=Object(C.a)(g.a.mark((function e(r){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.get,a=n(E),e.next=4,a.populationCompositionPerYear(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),K=Object(o.c)({key:"prefectures selector",get:function(){var e=Object(C.a)(g.a.mark((function e(t){var r,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.get,n=r(E),e.next=4,n.prefectures();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});var M=Object(o.d)({key:"prefecture selector family",get:function(e){var t=e.prefCode;return function(e){var r=(0,e.get)(K).find((function(e){return e.prefCode===t}));if(void 0===r)throw new Error("The prefecture was not found.");return r}}});var P=Object(o.c)({key:"chart data atom",get:function(e){var t=e.get;return t(w).map((function(e){var r=t(J({prefCode:e})),n=t(M({prefCode:e}));return{population:r.data[0].data,prefecture:n}})).reduce((function(e,t){return t.population.forEach((function(r){var n=e.find((function(e){return e.year===r.year}));n?n[t.prefecture.prefName]=r.value:e.push(Object(y.a)({year:r.year},t.prefecture.prefName,r.value))})),e}),[])}});var W=function(){var e=Object(o.f)(P);return Object(f.jsx)(l.a,{width:"95%",aspect:1.6,children:Object(f.jsxs)(j.a,{data:e,margin:{top:5,right:30,left:20,bottom:20},children:[Object(f.jsx)(b.a,{strokeDasharray:"3 3"}),Object(f.jsx)(h.a,{dataKey:"year"}),Object(f.jsx)(x.a,{yAxisId:"left"}),Object(f.jsx)(O.a,{}),Object(f.jsx)(v.a,{wrapperStyle:{fontSize:"calc(6px + 2vmin)"}}),e[0]&&Object.keys(e[0]).map((function(e){return"year"!==e&&Object(f.jsx)(m.a,{yAxisId:"left",type:"monotone",dataKey:e,stroke:"#"+[0,1,2,3,4,5].map((function(e){return Math.floor(16*Math.random()).toString(16)})).join("")},e)}))]})})},B=r(181),R=r.n(B),T=Object(n.memo)((function(e){var t=e.prefCode,r=function(e){return Object(o.f)(M({prefCode:e}))}(t),n=function(e){return Object(o.e)((function(t){var r=t.set;return function(){r(w,(function(t){return t.includes(e)?t.filter((function(t){return t!==e})):t.concat(e)}))}}),[e])}(t),a=function(e){return Object(o.f)(w).includes(e)}(t);return Object(f.jsx)("button",{className:R.a.root,"data-is-selected":a,onClick:n,children:Object(f.jsx)("span",{children:r.prefName})})})),Y=r(121),q=r.n(Y),F=function(){var e=Object(o.f)(K);return Object(f.jsx)("div",{className:q.a.gridContainer,children:e.map((function(e){return Object(f.jsx)("div",{className:q.a.gridItem,children:Object(f.jsx)(T,{prefCode:e.prefCode})},e.prefCode)}))})},V=function(){return Object(f.jsx)("div",{className:i.a.container,children:Object(f.jsxs)(n.Suspense,{fallback:Object(f.jsx)(d,{}),children:[Object(f.jsx)("header",{children:Object(f.jsx)("h1",{children:"Population Chart"})}),Object(f.jsx)("div",{className:i.a.prefectures,children:Object(f.jsx)(F,{})}),Object(f.jsx)("div",{className:i.a.chart,children:Object(f.jsx)(n.Suspense,{fallback:Object(f.jsx)(d,{}),children:Object(f.jsx)(W,{})})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(f.jsx)(n.StrictMode,{children:Object(f.jsx)(o.a,{children:Object(f.jsx)(V,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},97:function(e,t,r){e.exports={container:"App_container__1MQN3",chart:"App_chart__IfTIi"}}},[[330,1,2]]]);
//# sourceMappingURL=main.e63f4d45.chunk.js.map